<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>משימות במקום סיגריה</title>
  <style>
    :root{
      --bg:#0b1020; --card:#121734; --muted:#9aa3b2; --text:#eaf0ff;
      --accent:#6ea8fe; --accent2:#70e1a1; --danger:#ff7a7a; --warn:#ffd166;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,"Segoe UI",Arial}
    .wrap{max-width:560px;margin:0 auto;padding:18px}
    h1{font-size:24px;margin:10px 0 14px;text-align:center}
    .card{background:var(--card);border-radius:16px;padding:16px;box-shadow:0 8px 30px rgba(0,0,0,.25);margin-bottom:20px}
    .stats{display:grid;grid-template-columns:1fr 1fr;gap:10px;text-align:center}
    .stat{background:rgba(255,255,255,.04);border-radius:12px;padding:10px}
    .stat .num{font-size:22px;font-weight:800}
    .big-btn{
      display:block;width:100%;border-radius:999px;font-size:22px;
      padding:18px 20px;margin-bottom:16px;cursor:pointer;
      background:linear-gradient(135deg,#6ea8fe 0%,#70e1a1 100%);
      color:#05203b;font-weight:700;
    }
    .task{background:#1b2344;padding:12px;border-radius:12px;margin:8px 0;font-size:18px}
    button.small{padding:10px 14px;border:none;border-radius:12px;font-size:15px;margin-top:10px;cursor:pointer}
    .danger{background:var(--danger);color:#3a0a0a}
  </style>
</head>
<body>
  <span style="display:block; text-align:center; font-weight:bold; font-size:26px; margin:20px 0;">
  אסור אסור אסור לי לעשן זה מסוכן לי
</span>
  <div class="wrap">
    <h1>משימות במקום סיגריה 🚭</h1>
    <button class="big-btn" onclick="showTask()">בא לי סיגריה</button>

    <div id="taskBox" class="card" style="display:none"></div>

    <div class="card stats">
      <div class="stat">
        נפילות בסך הכל 
        <span id="falls" class="num">0</span>
        <button class="small danger" onclick="addFall()">נפלתי</button>
      </div>
      <div class="stat">
        זמן שעבר מאז התחלה 
        <span id="elapsed" class="num">0:00</span>
      </div>
    </div>

    <button class="small" onclick="resetAll()">איפוס הכל</button>
  </div>

  <script>
    const tasks = [
      "להתקלח",
      "לצחצח שיניים",
      "לשתות כוס מים",
      "לקחת מסטיק",
      "לקחת לכסניה",
      "לעשות סיבוב",
      "לעשות סקווטים",
      "לעשות שכיבות שמיכה",
      "לעשות כפיפות בטן",
      "תזכור: כל סיגריה מחמירה את החשק והנזק מצטבר"
    ];

    let falls = parseInt(localStorage.getItem("falls")||"0");
    let startTs = parseInt(localStorage.getItem("startTs")||Date.now());

    document.getElementById("falls").textContent = falls;

    function showTask(){
      const box = document.getElementById("taskBox");
      const rand = tasks[Math.floor(Math.random()*tasks.length)];
      box.innerHTML = `<div class="task">${rand}</div>`;
      box.style.display = "block";
    }

    function addFall(){
      falls++;
      localStorage.setItem("falls",falls);
      document.getElementById("falls").textContent = falls;
    }

    function resetAll(){
      localStorage.clear();
      falls=0;startTs=Date.now();
      localStorage.setItem("startTs",startTs);
      document.getElementById("falls").textContent = 0;
      document.getElementById("elapsed").textContent = "0:00";
      document.getElementById("taskBox").style.display="none";
    }

    function updateElapsed(){
      let diff = Date.now()-startTs;
      let days = Math.floor(diff/(1000*60*60*24));
      let hours = Math.floor((diff/(1000*60*60))%24);
      let mins = Math.floor((diff/(1000*60))%60);
      let text = days>0 ? `${days} ימים ${hours}:${mins.toString().padStart(2,'0')}` : `${hours}:${mins.toString().padStart(2,'0')}`;
      document.getElementById("elapsed").textContent = text;
    }
    setInterval(updateElapsed,1000*30);
    updateElapsed();
  </script>
</body>
</html>
